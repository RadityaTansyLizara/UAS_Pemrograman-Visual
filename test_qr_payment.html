<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test QR Code Payment - BabyShop</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: #f8f9fa;
            padding: 20px;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .payment-option {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .payment-option:hover {
            border-color: #ff6b9d !important;
            background-color: #fff5f8;
        }
        .payment-option.selected {
            border-color: #ff6b9d !important;
            background-color: #fff5f8;
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.1);
        }
        .qr-container {
            border: 2px solid #e0e0e0;
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .payment-method-logo {
            width: 80px;
            height: 80px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .dana-logo {
            background: linear-gradient(135deg, #1E88E5, #1565C0);
            color: white;
        }
        .gopay-logo {
            background: linear-gradient(135deg, #00AA13, #008A0E);
            color: white;
        }
        .ovo-logo {
            background: linear-gradient(135deg, #4E2A84, #3D1F6B);
            color: white;
        }
        .text-pink {
            color: #ff6b9d;
        }
        .bg-pink {
            background-color: #ff6b9d;
        }
        .btn-pink {
            background-color: #ff6b9d;
            color: white;
            border: none;
        }
        .btn-pink:hover {
            background-color: #ff5588;
            color: white;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="text-center mb-4">
            <h1 class="fw-bold text-pink mb-2">
                <i class="fas fa-credit-card me-2"></i>Test QR Code Payment
            </h1>
            <p class="lead text-muted">Preview tampilan QR Code untuk pembayaran e-wallet</p>
        </div>

        <div class="row">
            <div class="col-lg-8 mx-auto">
                <!-- Order Summary -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Ringkasan Pesanan</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>No. Pesanan:</strong> ORD-20250127-001</p>
                                <p><strong>Pelanggan:</strong> Ibu Sarah</p>
                                <p><strong>Telepon:</strong> 081234567890</p>
                            </div>
                            <div class="col-md-6">
                                <p><strong>Total Pembayaran:</strong></p>
                                <h3 class="text-pink fw-bold">Rp 250,000</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Methods -->
                <div class="card mb-4">
                    <div class="card-header bg-pink text-white">
                        <h5 class="mb-0">Pilih Metode Pembayaran</h5>
                    </div>
                    <div class="card-body">
                        <!-- DANA -->
                        <div class="payment-option mb-3 p-3 border rounded" data-method="DANA">
                            <div class="d-flex align-items-center">
                                <div class="payment-logo bg-primary text-white rounded me-3 d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                    <strong>DANA</strong>
                                </div>
                                <div>
                                    <h6 class="mb-1">DANA</h6>
                                    <small class="text-muted">Bayar dengan aplikasi DANA</small>
                                </div>
                            </div>
                        </div>

                        <!-- GoPay -->
                        <div class="payment-option mb-3 p-3 border rounded" data-method="GoPay">
                            <div class="d-flex align-items-center">
                                <div class="payment-logo bg-success text-white rounded me-3 d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                    <strong>GP</strong>
                                </div>
                                <div>
                                    <h6 class="mb-1">GoPay</h6>
                                    <small class="text-muted">Bayar dengan aplikasi Gojek</small>
                                </div>
                            </div>
                        </div>

                        <!-- OVO -->
                        <div class="payment-option mb-3 p-3 border rounded" data-method="OVO">
                            <div class="d-flex align-items-center">
                                <div class="payment-logo bg-warning text-dark rounded me-3 d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                    <strong>OVO</strong>
                                </div>
                                <div>
                                    <h6 class="mb-1">OVO</h6>
                                    <small class="text-muted">Bayar dengan aplikasi OVO</small>
                                </div>
                            </div>
                        </div>

                        <!-- QR Code Section -->
                        <div id="qr-section" style="display: none;" class="mt-4 p-4 bg-light rounded">
                            <div class="text-center mb-4">
                                <h5 class="fw-bold mb-2">
                                    <i class="fas fa-qrcode me-2"></i>Scan QR Code untuk Pembayaran
                                </h5>
                                <p class="text-muted mb-0" id="qr-instruction">Scan QR Code dengan aplikasi yang Anda pilih</p>
                            </div>
                            
                            <div class="row justify-content-center">
                                <div class="col-md-6">
                                    <div class="qr-container bg-white p-4 rounded shadow-sm text-center">
                                        <div id="qr-payment-logo" class="mb-3">
                                            <!-- Payment logo will be inserted here -->
                                        </div>
                                        <div id="qrcode" class="d-inline-block p-3 bg-white border rounded mb-3">
                                            <!-- QR Code will be generated here -->
                                        </div>
                                        <div class="payment-amount mb-3">
                                            <p class="text-muted mb-1">Total Pembayaran</p>
                                            <h3 class="text-pink fw-bold mb-0">Rp 250,000</h3>
                                        </div>
                                        <div class="payment-details bg-light p-3 rounded">
                                            <p class="mb-1 small"><strong>No. Pesanan:</strong> ORD-20250127-001</p>
                                            <p class="mb-0 small"><strong>Nama:</strong> Ibu Sarah</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="alert alert-info mt-4" role="alert">
                                <h6 class="alert-heading">
                                    <i class="fas fa-info-circle me-2"></i>Cara Pembayaran:
                                </h6>
                                <ol class="mb-0 ps-3">
                                    <li>Buka aplikasi <span id="app-name">e-wallet</span> Anda</li>
                                    <li>Pilih menu "Scan QR" atau "Bayar"</li>
                                    <li>Scan QR Code di atas</li>
                                    <li>Periksa detail pembayaran</li>
                                    <li>Konfirmasi pembayaran di aplikasi</li>
                                    <li>Klik tombol "Konfirmasi Pembayaran" di bawah setelah berhasil transfer</li>
                                </ol>
                            </div>

                            <div class="alert alert-warning mt-3" role="alert">
                                <i class="fas fa-clock me-2"></i>
                                <strong>Penting:</strong> Selesaikan pembayaran dalam 15 menit untuk menghindari pembatalan otomatis.
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-pink btn-lg px-5" id="confirmBtn" disabled>
                                <i class="fas fa-check-circle me-2"></i>Konfirmasi Pembayaran
                            </button>
                        </div>
                    </div>
                </div>

                <div class="alert alert-success">
                    <h6><i class="fas fa-check-circle me-2"></i>Fitur QR Code Berhasil Ditambahkan!</h6>
                    <ul class="mb-0">
                        <li>QR Code berbeda untuk setiap metode (DANA, OVO, GoPay)</li>
                        <li>Logo metode pembayaran yang dipilih</li>
                        <li>Instruksi pembayaran yang jelas</li>
                        <li>Animasi pulse pada QR container</li>
                        <li>Timer countdown 15 menit</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const paymentOptions = document.querySelectorAll('.payment-option');
            const confirmBtn = document.getElementById('confirmBtn');
            const qrSection = document.getElementById('qr-section');
            const qrcodeDiv = document.getElementById('qrcode');
            const qrPaymentLogo = document.getElementById('qr-payment-logo');
            const appName = document.getElementById('app-name');
            let currentQR = null;

            paymentOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove previous selections
                    paymentOptions.forEach(opt => opt.classList.remove('selected'));

                    // Add selection to current option
                    this.classList.add('selected');

                    // Enable confirm button
                    confirmBtn.disabled = false;
                    const methodName = this.dataset.method;
                    confirmBtn.innerHTML = '<i class="fas fa-check-circle me-2"></i>Konfirmasi Pembayaran ' + methodName;

                    // Show QR section
                    qrSection.style.display = 'block';
                    
                    // Clear previous QR code
                    qrcodeDiv.innerHTML = '';
                    
                    // Generate QR Code data based on payment method
                    let qrData = '';
                    let logoHTML = '';
                    let appNameText = '';
                    
                    switch(methodName) {
                        case 'DANA':
                            qrData = 'DANA://pay?merchant=BabyShop3Berlian&order=ORD-20250127-001&amount=250000&customer=IbuSarah';
                            logoHTML = '<div class="payment-method-logo dana-logo">DANA</div>';
                            appNameText = 'DANA';
                            break;
                        case 'GoPay':
                            qrData = 'gojek://gopay/merchanttransfer?toid=BabyShop3Berlian&amount=250000&description=Order-ORD-20250127-001';
                            logoHTML = '<div class="payment-method-logo gopay-logo"><i class="fas fa-motorcycle"></i> GoPay</div>';
                            appNameText = 'GoPay (Gojek)';
                            break;
                        case 'OVO':
                            qrData = 'ovoid://payment?merchant=BabyShop3Berlian&orderid=ORD-20250127-001&amount=250000&name=IbuSarah';
                            logoHTML = '<div class="payment-method-logo ovo-logo">OVO</div>';
                            appNameText = 'OVO';
                            break;
                    }
                    
                    // Update logo and app name
                    qrPaymentLogo.innerHTML = logoHTML;
                    appName.textContent = appNameText;
                    
                    // Generate new QR Code
                    try {
                        currentQR = new QRCode(qrcodeDiv, {
                            text: qrData,
                            width: 250,
                            height: 250,
                            colorDark: "#000000",
                            colorLight: "#ffffff",
                            correctLevel: QRCode.CorrectLevel.H
                        });
                    } catch (error) {
                        console.error('Error generating QR code:', error);
                        qrcodeDiv.innerHTML = '<div class="alert alert-danger">Gagal membuat QR Code. Silakan refresh halaman.</div>';
                    }

                    // Scroll to QR code
                    setTimeout(() => {
                        qrSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 100);
                });
            });

            confirmBtn.addEventListener('click', function() {
                alert('Pembayaran dikonfirmasi! (Demo Mode)');
            });
        });
    </script>
</body>
</html>
